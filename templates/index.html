{% extends 'base.html' %}

{% block content %}
    <h1>Elements</h1>

    <!-- Display any message passed from the backend -->
    {% if message %}
        <p><strong>{{ message }}</strong></p>
    {% endif %}

    {% set search = namespace(found=false) %} <!-- namespace object holds on to values outside loops, useful to use as 'break' since Jinja no hyave that -->

    <!--------------------------- Display items from the database ----------------------->
    <table class="periodic_table">
        <tr class="periodic_table">
            {% for number in range(1, 19)%}
            <th class="periodic_table"><p style="text-align: center; flex-grow: 1; margin-bottom: 0;">{{number}}</p></th>
            {% endfor %}
        </tr>
        {% for y in range(1, 11) %}
        <tr class="periodic_table">
            {% for x in range(1, 19) %}
                {% for element in elements if not search.found %}

                    {% if element.x_coord == x and element.y_coord == y %}
                        {% set search.found = true %}
                        <td class="periodic_table element_container">
                            <button class="periodic_table element_container m-0 b-0 p-0" onclick="location.href='https://google.com';">
                            <p class="periodic_table element_atomic_number">{{ element.atomic_number }}</p>
                            <p class="periodic_table element_symbol">{{ element.symbol }}</p>
                            <p class="periodic_table element_name">{{ element.name }}</p>
                            <p class="periodic_table element_atomic_weight">{{ element.atomic_weight }}</p>
                            </button>
                        </td>
                    {% endif %}

                {% endfor %}
                 
                {% if not search.found %}
                <td class="periodic_table"></td>
                {% endif %}

                {% set search.found = false%}
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
    {% for element in elements %}
        <li>
            {{ element.id }}: 
            {% if edit_mode %}
            <a href="{{ url_for('update_element', id=element.id)}}">{{ element.name }}</a>
            {% else %}
            {{ element.name }}
            {% endif %}
        </li>
        {% endfor %}
{% endblock %}